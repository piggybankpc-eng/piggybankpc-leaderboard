{% extends "base.html" %}

{% block title %}Download - PiggyBankPC Benchmark{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <!-- Header -->
            <div class="text-center mb-5">
                <h1 class="display-4">
                    <i class="bi bi-download"></i> Download PiggyBankPC Benchmark
                </h1>
                <p class="lead text-muted">
                    One-click AppImage installer for Linux. Test your hardware and join the leaderboard!
                </p>
            </div>

            <!-- NEW: Web-Based Benchmark Control -->
            <div class="alert alert-primary alert-dismissible fade show shadow-lg mb-4" role="alert">
                <h4 class="alert-heading"><i class="bi bi-rocket-takeoff"></i> NEW: Run Benchmarks from Your Browser!</h4>
                <p class="mb-3">
                    No download needed! Use our new web-based control panel to run benchmarks directly from your browser with real-time progress tracking.
                </p>
                <hr>
                <div class="d-grid gap-2">
                    <a href="{{ url_for('benchmark_api.benchmark_control_page') }}" class="btn btn-success btn-lg">
                        <i class="bi bi-play-circle"></i> Launch Web Benchmark Control Panel
                    </a>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <!-- Download Card -->
            <div class="card shadow-lg mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="bi bi-file-earmark-zip"></i> PiggyBankPC Benchmark Suite
                    </h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h5><i class="bi bi-info-circle"></i> What's Included?</h5>
                        <ul class="mb-0">
                            <li><strong>Gaming FPS Benchmark</strong> - Test real-world gaming performance</li>
                            <li><strong>AI/LLM Benchmark</strong> - Measure tokens per second for AI workloads</li>
                            <li><strong>CPU Benchmark</strong> - Comprehensive CPU performance testing</li>
                            <li><strong>GPU Diagnostics</strong> - Automatic issue detection & optimization tips</li>
                            <li><strong>Encrypted Results</strong> - Tamper-proof .pbr file generation</li>
                        </ul>
                    </div>

                    <!-- Download Button -->
                    <div class="d-grid gap-2 my-4">
                        <a href="https://github.com/piggybankpc-eng/piggybankpc-leaderboard/releases/latest/download/PiggyBankPC-Benchmark.AppImage"
                           class="btn btn-primary btn-lg"
                           target="_blank">
                            <i class="bi bi-download"></i> Download AppImage for Linux
                        </a>
                        <a href="https://github.com/piggybankpc-eng/piggybankpc-leaderboard/releases"
                           class="btn btn-outline-secondary"
                           target="_blank">
                            <i class="bi bi-clock-history"></i> View All Versions
                        </a>
                    </div>

                    <!-- System Requirements -->
                    <div class="alert alert-warning">
                        <h6><i class="bi bi-exclamation-triangle"></i> System Requirements</h6>
                        <ul class="mb-0 small">
                            <li><strong>OS:</strong> Ubuntu 22.04+ or compatible Linux distribution</li>
                            <li><strong>GPU:</strong> NVIDIA GPU required (for AI benchmarks)</li>
                            <li><strong>RAM:</strong> 8GB minimum, 16GB recommended</li>
                            <li><strong>Storage:</strong> 2GB free space</li>
                            <li><strong>Internet:</strong> Required for result submission</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Installation Instructions -->
            <div class="card shadow mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-terminal"></i> Installation Instructions
                    </h5>
                </div>
                <div class="card-body">
                    <ol>
                        <li class="mb-3">
                            <strong>Download the AppImage</strong>
                            <p class="text-muted mb-0">Click the download button above to get the AppImage file</p>
                        </li>
                        <li class="mb-3">
                            <strong>Make it executable</strong>
                            <div class="bg-dark text-white p-3 rounded mt-2">
                                <code>chmod +x PiggyBankPC-Benchmark.AppImage</code>
                            </div>
                        </li>
                        <li class="mb-3">
                            <strong>Run the benchmark</strong>
                            <div class="bg-dark text-white p-3 rounded mt-2">
                                <code>./PiggyBankPC-Benchmark.AppImage</code>
                            </div>
                        </li>
                        <li class="mb-3">
                            <strong>Wait for completion</strong>
                            <p class="text-muted mb-0">The benchmark will run all tests automatically (5-15 minutes)</p>
                        </li>
                        <li class="mb-0">
                            <strong>Submit results</strong>
                            <p class="text-muted mb-0">Upload the generated .pbr file on the <a href="{{ url_for('submit.submit') }}">Submit page</a></p>
                        </li>
                    </ol>
                </div>
            </div>

            <!-- Security Notice -->
            <div class="card shadow mb-4 border-danger">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-shield-check"></i> Security & Anti-Tampering
                    </h5>
                </div>
                <div class="card-body">
                    <p><strong>Why AppImage?</strong></p>
                    <p class="text-muted">
                        The benchmark is distributed as an AppImage to ensure result integrity. All benchmark results
                        are cryptographically signed and cannot be tampered with. This guarantees fair competition
                        on the leaderboard.
                    </p>
                    <p class="mb-0"><strong>What gets encrypted?</strong></p>
                    <ul class="text-muted mb-0">
                        <li>Hardware fingerprint (prevents duplicate submissions)</li>
                        <li>All benchmark scores (FPS, AI tokens/sec, CPU scores)</li>
                        <li>System information (GPU, CPU, RAM)</li>
                        <li>Timestamp and benchmark version</li>
                    </ul>
                </div>
            </div>

            <!-- GitHub & Support -->
            <div class="card shadow">
                <div class="card-body text-center">
                    <h5>Need Help?</h5>
                    <p class="text-muted">
                        Watch the tutorial video or join the community discussion
                    </p>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                        <a href="https://youtube.com/{{ config.YOUTUBE_CHANNEL }}"
                           target="_blank"
                           class="btn btn-danger">
                            <i class="bi bi-youtube"></i> Watch Tutorial
                        </a>
                        <a href="https://github.com/piggybankpc-eng"
                           target="_blank"
                           class="btn btn-outline-secondary">
                            <i class="bi bi-github"></i> GitHub
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
